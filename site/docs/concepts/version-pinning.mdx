---
title: Version pinning
---

Version pinning keeps a repo locked to a specific Agent Layer release so every developer runs the same behavior.

## How pinning works

When `.agent-layer/al.version` exists, `al` will:

1. read the pinned version
2. download it if missing from the local cache
3. dispatch to that version automatically

Pin formats:

- `X.Y.Z`
- `vX.Y.Z`

## How to set a pin

- `al init` writes a pin when you are running a release build
- or pass `--version X.Y.Z` to `al init`
- or edit `.agent-layer/al.version` directly

## Upgrading a pinned repo

1. Update `.agent-layer/al.version` to the new release
2. Run `al` in the repo to download the pinned version
3. Re-run `al init --overwrite` if you want to review template updates

## Overrides and offline mode

| Variable | Purpose |
| --- | --- |
| `AL_VERSION` | force a version (overrides the repo pin) |
| `AL_NO_NETWORK` | disable downloads (fails if the pinned version is not cached) |
| `AL_CACHE_DIR` | override the cache location |

## When to use pinning

- Teams that want deterministic behavior across laptops and CI
- Repos that require reproducible agent behavior
- Any project where a breaking config change should be coordinated

:::tip
Pinning is most valuable once multiple developers are running `al` in the same repo.
:::

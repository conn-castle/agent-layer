[approvals]
# one of: "all", "mcp", "commands", "none"
mode = "all"

[agents.gemini]
enabled = true
# model is optional; when omitted, Agent Layer does not pass a model flag and the client uses its default.
# model = "..."

[agents.claude]
enabled = true
# model is optional; when omitted, Agent Layer does not pass a model flag and the client uses its default.
# model = "..."

[agents.codex]
enabled = true
# model is optional; when omitted, Agent Layer does not pass a model setting and the client uses its default.
# model = "gpt-5.2-codex"
# reasoning_effort is optional; when omitted, the client uses its default.
# reasoning_effort = "xhigh" # codex only

[agents.vscode]
enabled = true

[agents.antigravity]
enabled = true

[mcp]
# Secrets belong in .agent-layer/.env (never in config.toml).
# MCP servers here are the external tool servers that get projected into client configs.
# The installer seeds a small library of defaults you can edit, disable, or delete.

[[mcp.servers]]
# Context7: current library docs + code examples. Great first server to enable when integrating SDKs.
# Requires an API key in .agent-layer/.env: AL_CONTEXT7_API_KEY (sign up).
id = "context7"
enabled = false
transport = "stdio"
command = "npx"
args = ["-y", "@upstash/context7-mcp"]
env = { CONTEXT7_API_KEY = "${AL_CONTEXT7_API_KEY}" }

[[mcp.servers]]
# GitHub: issues/PRs/actions workflows. Enable when you want the agent to operate on GitHub, not just local code.
# Requires a token in .agent-layer/.env: AL_GITHUB_PERSONAL_ACCESS_TOKEN (and access to the configured endpoint).
id = "github"
enabled = false
transport = "http"
http_transport = "streamable"
url = "https://api.githubcopilot.com/mcp/"
headers = { Authorization = "Bearer ${AL_GITHUB_PERSONAL_ACCESS_TOKEN}", "X-MCP-Tools" = "actions_list,actions_get,actions_run_trigger,get_job_logs,create_pull_request,list_pull_requests,pull_request_read,pull_request_review_write,search_pull_requests,update_pull_request,search_repositories" }

[[mcp.servers]]
# Tavily: web search/research for up-to-date information (beyond training data).
# Requires an API key in .agent-layer/.env: AL_TAVILY_API_KEY (sign up).
id = "tavily"
enabled = false
transport = "http"
http_transport = "streamable"
url = "https://mcp.tavily.com/mcp/?tavilyApiKey=${AL_TAVILY_API_KEY}"

[[mcp.servers]]
# Fetch: retrieve a URL's contents for the agent to read. Useful alongside search.
# Requires `uvx` (from `uv`) to be installed.
id = "fetch"
enabled = false
transport = "stdio"
command = "uvx"
args = ["mcp-server-fetch"]

[[mcp.servers]]
# Playwright: browser automation for web flows and complex pages. High leverage, not needed in every repo.
# Requires Node (npx) and downloads browser dependencies on first use.
id = "playwright"
enabled = false
transport = "stdio"
command = "npx"
args = ["-y", "@playwright/mcp@latest"]

[[mcp.servers]]
# Ripgrep: fast repo search (often the difference between "guessing" and finding the right file quickly).
# Requires Node (npx).
id = "ripgrep"
enabled = false
clients = ["gemini", "claude", "codex"]
transport = "stdio"
command = "npx"
args = ["-y", "mcp-ripgrep@latest"]

[[mcp.servers]]
# Filesystem: controlled filesystem access. The template restricts access to the current repo root.
# Requires Node (npx).
id = "filesystem"
enabled = false
clients = ["gemini", "claude", "codex"]
transport = "stdio"
command = "npx"
# Restrict access to the current repo; paths may be absolute or relative.
# Use ${AL_REPO_ROOT} (or ~/...) to expand to an absolute path when run.
args = ["-y", "@modelcontextprotocol/server-filesystem", "${AL_REPO_ROOT}"]

[warnings]
# Optional thresholds for warning checks. Omit or comment out to disable.
instruction_token_threshold = 10000
mcp_server_threshold = 15
mcp_tools_total_threshold = 60
mcp_server_tools_threshold = 25
mcp_schema_tokens_total_threshold = 30000
mcp_schema_tokens_server_threshold = 20000
